<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registros Operacionales - Nepal 2</title>
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1f4e78;
            --secondary: #2e5c8a;
            --accent: #4a90e2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light-bg: #f8fafc;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--light-bg);
            color: #1e293b;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 15px;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Form Container */
        .form-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .form-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent);
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.2rem;
            color: var(--secondary);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #334155;
        }

        .required {
            color: var(--danger);
        }

        .form-input,
        .form-select,
        .form-textarea {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: var(--accent);
            background: #f1f5f9;
        }

        .file-upload input {
            display: none;
        }

        .uploaded-files {
            margin-top: 10px;
        }

        .file-item {
            background: #f1f5f9;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-remove {
            color: var(--danger);
            cursor: pointer;
            font-weight: 600;
        }

        /* Buttons */
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            background: var(--primary);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #334155;
        }

        .btn-secondary:hover {
            background: #cbd5e1;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Table */
        .records-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .records-table th,
        .records-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .records-table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        .records-table tr:hover {
            background: #f8fafc;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-danger {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Alert */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid var(--success);
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid var(--accent);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #64748b;
            transition: all 0.3s ease;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Checklist */
        .checklist {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checklist-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checklist-item label {
            flex: 1;
            cursor: pointer;
        }

        /* Progress */
        .progress-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--accent);
            margin-bottom: 20px;
        }

        .progress-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--accent));
            transition: width 0.5s ease;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="pageTitle">üìù Registros Operacionales Nepal 2</h1>
            <p id="pageSubtitle">Sistema de Gesti√≥n SST 2026</p>
            <button class="back-btn" onclick="window.close()">‚Üê Volver al Sistema</button>
        </div>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showForm('induccion')">üéì Inducci√≥n/Reinducci√≥n</button>
            <button class="tab" onclick="showForm('inspecciones')">üîç Inspecciones</button>
            <button class="tab" onclick="showForm('mantenimiento')">üîß Mantenimiento</button>
            <button class="tab" onclick="showForm('contratistas')">üèóÔ∏è Contratistas</button>
            <button class="tab" onclick="showForm('accidentes')">‚ö†Ô∏è Accidentes</button>
            <button class="tab" onclick="showForm('simulacros')">üö® Simulacros</button>
        </div>

        <!-- FORM 1: INDUCCI√ìN/REINDUCCI√ìN -->
        <div id="form-induccion" class="tab-content active">
            <div class="progress-info">
                <div class="progress-stat">
                    <strong>Progreso Mensual 2026</strong>
                    <span id="induccion-progress">0/12 meses completados</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="induccion-bar" style="width: 0%"></div>
                </div>
            </div>

            <div class="form-container">
                <h2 class="form-title">Registro de Inducci√≥n y Reinducci√≥n SST</h2>
                
                <div class="alert alert-info">
                    <strong>üìã Frecuencia:</strong> Mensual | <strong>üìÖ Pr√≥ximo registro:</strong> Enero 2026
                </div>

                <form id="formInduccion">
                    <div class="form-section">
                        <h3 class="section-title">Informaci√≥n General</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Mes <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Enero 2026</option>
                                    <option>Febrero 2026</option>
                                    <option>Marzo 2026</option>
                                    <option>Abril 2026</option>
                                    <option>Mayo 2026</option>
                                    <option>Junio 2026</option>
                                    <option>Julio 2026</option>
                                    <option>Agosto 2026</option>
                                    <option>Septiembre 2026</option>
                                    <option>Octubre 2026</option>
                                    <option>Noviembre 2026</option>
                                    <option>Diciembre 2026</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha de Realizaci√≥n <span class="required">*</span></label>
                                <input type="date" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Capacitaci√≥n <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Inducci√≥n SST</option>
                                    <option>Reinducci√≥n Anual</option>
                                    <option>Capacitaci√≥n Espec√≠fica</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Detalles de la Capacitaci√≥n</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Tema Principal <span class="required">*</span></label>
                                <input type="text" class="form-input" placeholder="Ej: Prevenci√≥n de Riesgos Locativos" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Duraci√≥n (horas) <span class="required">*</span></label>
                                <input type="number" class="form-input" placeholder="2" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Responsable/Instructor <span class="required">*</span></label>
                                <input type="text" class="form-input" placeholder="Carla Castellano - Asesor√≠a SST" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Temas Tratados <span class="required">*</span></label>
                            <textarea class="form-textarea" placeholder="Describa los temas principales de la capacitaci√≥n..." required></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Asistentes</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Personal SERDAN <span class="required">*</span></label>
                                <input type="number" class="form-input" placeholder="N√∫mero de asistentes" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Personal SOSA <span class="required">*</span></label>
                                <input type="number" class="form-input" placeholder="N√∫mero de asistentes" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Total Asistentes <span class="required">*</span></label>
                                <input type="number" class="form-input" placeholder="Total" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Evaluaci√≥n de Aprendizaje</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="eval1">
                                <label for="eval1">Se realiz√≥ evaluaci√≥n de conocimientos</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eval2">
                                <label for="eval2">Los asistentes demostraron comprensi√≥n de los temas</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eval3">
                                <label for="eval3">Se entreg√≥ material did√°ctico</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eval4">
                                <label for="eval4">Se emitieron certificados de asistencia</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Observaciones</label>
                            <textarea class="form-textarea" placeholder="Observaciones adicionales sobre la capacitaci√≥n..."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Documentos Soporte</h3>
                        <div class="file-upload" onclick="document.getElementById('fileInduccion').click()">
                            <p>üìé Click para adjuntar archivos</p>
                            <small>Lista de asistencia, fotos, presentaciones, evaluaciones</small>
                            <input type="file" id="fileInduccion" multiple accept=".pdf,.jpg,.png,.xlsx,.docx">
                        </div>
                        <div class="uploaded-files" id="filesInduccion"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Guardar Borrador</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar Registro</button>
                    </div>
                </form>
            </div>

            <!-- Registros Guardados -->
            <div class="form-container">
                <h2 class="form-title">üìã Registros de Inducci√≥n 2026</h2>
                <table class="records-table">
                    <thead>
                        <tr>
                            <th>Mes</th>
                            <th>Fecha</th>
                            <th>Tema</th>
                            <th>Asistentes</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="induccionRecords">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 30px; color: #64748b;">
                                No hay registros a√∫n. Completa el primer formulario para comenzar.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- FORM 2: INSPECCIONES LOCATIVAS Y EQUIPOS -->
        <div id="form-inspecciones" class="tab-content">
            <div class="progress-info">
                <div class="progress-stat">
                    <strong>Progreso Inspecciones 2026</strong>
                    <span>0/12 inspecciones mensuales | 0/4 trimestrales</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div class="form-container">
                <h2 class="form-title">Registro de Inspecciones de Seguridad</h2>
                
                <div class="alert alert-info">
                    <strong>üìã Frecuencia:</strong> Mensual (locativas) + Trimestral (equipos contra incendio)
                </div>

                <form id="formInspecciones">
                    <div class="form-section">
                        <h3 class="section-title">Informaci√≥n General</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Tipo de Inspecci√≥n <span class="required">*</span></label>
                                <select class="form-select" required onchange="updateInspectionType(this.value)">
                                    <option value="">Seleccionar...</option>
                                    <option value="mensual">Inspecci√≥n Mensual Locativa</option>
                                    <option value="trimestral">Inspecci√≥n Trimestral Equipos Incendio</option>
                                    <option value="especial">Inspecci√≥n Especial</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Mes/Per√≠odo <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Enero 2026</option>
                                    <option>Q1 2026 (Ene-Mar)</option>
                                    <option>Febrero 2026</option>
                                    <option>Marzo 2026</option>
                                    <option>Q2 2026 (Abr-Jun)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha de Inspecci√≥n <span class="required">*</span></label>
                                <input type="date" class="form-input" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section" id="inspeccion-locativa">
                        <h3 class="section-title">Checklist Inspecci√≥n Locativa</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="loc1">
                                <label for="loc1">Escaleras en buen estado (pelda√±os, pasamanos)</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc2">
                                <label for="loc2">Cintas antideslizantes en escaleras</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc3">
                                <label for="loc3">Iluminaci√≥n zonas comunes funcional</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc4">
                                <label for="loc4">Luces de emergencia operativas</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc5">
                                <label for="loc5">Se√±alizaci√≥n de evacuaci√≥n visible</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc6">
                                <label for="loc6">Puertas el√©ctricas funcionando correctamente</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc7">
                                <label for="loc7">Pisos libres de obst√°culos</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc8">
                                <label for="loc8">Rutas de evacuaci√≥n despejadas</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc9">
                                <label for="loc9">Acceso a tanques seguro</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="loc10">
                                <label for="loc10">Sin filtraciones o humedades visibles</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-section" id="inspeccion-equipos" style="display: none;">
                        <h3 class="section-title">Checklist Equipos Contra Incendio</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="eq1">
                                <label for="eq1">Extintor 1 - Vigente y presurizado</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq2">
                                <label for="eq2">Extintor 2 - Vigente y presurizado</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq3">
                                <label for="eq3">Extintor 3 - Vigente y presurizado</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq4">
                                <label for="eq4">Extintor 4 - Vigente y presurizado</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq5">
                                <label for="eq5">Gabinete contra incendio - Manguera en buen estado</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq6">
                                <label for="eq6">Gabinete - V√°lvula operativa</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq7">
                                <label for="eq7">Se√±alizaci√≥n equipos visible</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="eq8">
                                <label for="eq8">Acceso a equipos despejado</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Hallazgos</h3>
                        <div class="form-group">
                            <label class="form-label">Hallazgos Identificados</label>
                            <textarea class="form-textarea" placeholder="Describe los hallazgos o condiciones inseguras identificadas..." rows="4"></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Nivel de Riesgo</label>
                                <select class="form-select">
                                    <option>Sin hallazgos</option>
                                    <option>Bajo</option>
                                    <option>Medio</option>
                                    <option>Alto</option>
                                    <option>Cr√≠tico</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Estado Actual</label>
                                <select class="form-select">
                                    <option>Todo OK</option>
                                    <option>Corregido inmediatamente</option>
                                    <option>En seguimiento</option>
                                    <option>Plan de mejoramiento</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Acciones Correctivas Propuestas</label>
                            <textarea class="form-textarea" placeholder="Acciones recomendadas para corregir los hallazgos..." rows="3"></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Responsable de la Inspecci√≥n</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Nombre <span class="required">*</span></label>
                                <input type="text" class="form-input" value="Carla Castellano Madriz" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Cargo <span class="required">*</span></label>
                                <input type="text" class="form-input" value="Responsable SG-SST" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Evidencias Fotogr√°ficas</h3>
                        <div class="file-upload" onclick="document.getElementById('fileInspeccion').click()">
                            <p>üì∑ Click para adjuntar fotos</p>
                            <small>Fotos de hallazgos, condiciones revisadas, evidencias</small>
                            <input type="file" id="fileInspeccion" multiple accept="image/*,.pdf">
                        </div>
                        <div class="uploaded-files" id="filesInspeccion"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Guardar Borrador</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar Inspecci√≥n</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- FORM 3: REGISTRO DE MANTENIMIENTOS -->
        <div id="form-mantenimiento" class="tab-content">
            <div class="form-container">
                <h2 class="form-title">Registro de Mantenimientos Ejecutados</h2>
                
                <div class="alert alert-info">
                    <strong>üìã Frecuencia:</strong> Seg√∫n Programa de Mantenimiento 2026
                </div>

                <form id="formMantenimiento">
                    <div class="form-section">
                        <h3 class="section-title">Informaci√≥n del Mantenimiento</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Tipo de Mantenimiento <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Preventivo</option>
                                    <option>Correctivo</option>
                                    <option>Predictivo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha de Ejecuci√≥n <span class="required">*</span></label>
                                <input type="date" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">√Årea/Sistema <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Extintor</option>
                                    <option>Luces de emergencia</option>
                                    <option>Escaleras</option>
                                    <option>Puertas el√©ctricas</option>
                                    <option>Iluminaci√≥n</option>
                                    <option>Tanques de agua</option>
                                    <option>Sistema el√©ctrico</option>
                                    <option>Otro</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Detalles</h3>
                        <div class="form-group">
                            <label class="form-label">Descripci√≥n del Trabajo Realizado <span class="required">*</span></label>
                            <textarea class="form-textarea" placeholder="Describe el mantenimiento ejecutado..." required></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Empresa/Responsable <span class="required">*</span></label>
                                <input type="text" class="form-input" placeholder="Nombre empresa o persona" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Costo (COP)</label>
                                <input type="number" class="form-input" placeholder="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Observaciones</label>
                            <textarea class="form-textarea" placeholder="Observaciones adicionales..."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Soportes</h3>
                        <div class="file-upload" onclick="document.getElementById('fileMantenimiento').click()">
                            <p>üìé Click para adjuntar archivos</p>
                            <small>Fotos antes/despu√©s, facturas, certificados</small>
                            <input type="file" id="fileMantenimiento" multiple>
                        </div>
                        <div class="uploaded-files" id="filesMantenimiento"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Guardar Borrador</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar Registro</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- FORM 4: SOPORTES CONTRATISTAS -->
        <div id="form-contratistas" class="tab-content">
            <div class="form-container">
                <h2 class="form-title">Documentaci√≥n y Seguimiento a Contratistas</h2>
                
                <div class="alert alert-info">
                    <strong>üìã Frecuencia:</strong> Trimestral (Conservaci√≥n: Duraci√≥n contrato + 20 a√±os)
                </div>

                <form id="formContratistas">
                    <div class="form-section">
                        <h3 class="section-title">Informaci√≥n del Contratista</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Empresa <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>SERDAN</option>
                                    <option>SOSA</option>
                                    <option>Otro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Per√≠odo <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Q1 2026 (Ene-Mar)</option>
                                    <option>Q2 2026 (Abr-Jun)</option>
                                    <option>Q3 2026 (Jul-Sep)</option>
                                    <option>Q4 2026 (Oct-Dic)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha de Verificaci√≥n <span class="required">*</span></label>
                                <input type="date" class="form-input" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Checklist de Documentaci√≥n</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="cont1">
                                <label for="cont1">Afiliaci√≥n ARL vigente</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont2">
                                <label for="cont2">Afiliaci√≥n EPS vigente</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont3">
                                <label for="cont3">Afiliaci√≥n Pensi√≥n vigente</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont4">
                                <label for="cont4">Certificado SG-SST de la empresa</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont5">
                                <label for="cont5">Inducci√≥n SST realizada</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont6">
                                <label for="cont6">Matriz de riesgos del contratista</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont7">
                                <label for="cont7">EPP entregados y registrados</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="cont8">
                                <label for="cont8">Examen m√©dico ocupacional vigente</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Observaciones de Cumplimiento</label>
                            <textarea class="form-textarea" placeholder="Documentos faltantes, observaciones..."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Documentos Digitales</h3>
                        <div class="file-upload" onclick="document.getElementById('fileContratistas').click()">
                            <p>üìé Click para adjuntar archivos</p>
                            <small>Afiliaciones, certificados, matriz de riesgos, etc.</small>
                            <input type="file" id="fileContratistas" multiple accept=".pdf,.jpg,.png">
                        </div>
                        <div class="uploaded-files" id="filesContratistas"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Guardar Borrador</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar Verificaci√≥n</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- FORM 5: INVESTIGACI√ìN DE ACCIDENTES -->
        <div id="form-accidentes" class="tab-content">
            <div class="form-container">
                <h2 class="form-title">Investigaci√≥n de Accidentes/Incidentes</h2>
                
                <div class="alert alert-success">
                    <strong>‚úÖ Estado 2026:</strong> 0 accidentes registrados | Meta: Mantener 0%
                </div>

                <form id="formAccidentes">
                    <div class="form-section">
                        <h3 class="section-title">Informaci√≥n del Evento</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Tipo <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Accidente de Trabajo</option>
                                    <option>Incidente</option>
                                    <option>Casi Accidente</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha del Evento <span class="required">*</span></label>
                                <input type="date" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Hora del Evento</label>
                                <input type="time" class="form-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Lugar del Evento <span class="required">*</span></label>
                                <input type="text" class="form-input" placeholder="Escaleras, lobby, etc." required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Gravedad</label>
                                <select class="form-select">
                                    <option>Leve</option>
                                    <option>Moderado</option>
                                    <option>Grave</option>
                                    <option>Mortal</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Persona(s) Afectada(s)</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Nombre Completo <span class="required">*</span></label>
                                <input type="text" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Identificaci√≥n <span class="required">*</span></label>
                                <input type="text" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Empresa/Cargo</label>
                                <input type="text" class="form-input">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Descripci√≥n del Evento</h3>
                        <div class="form-group">
                            <label class="form-label">¬øQu√© pas√≥? <span class="required">*</span></label>
                            <textarea class="form-textarea" placeholder="Describa lo sucedido..." required rows="4"></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">An√°lisis de Causas</label>
                            <textarea class="form-textarea" placeholder="Causas inmediatas, causas b√°sicas..." rows="4"></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Acciones Correctivas Inmediatas</label>
                            <textarea class="form-textarea" placeholder="Acciones tomadas en el momento..." rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Plan de Acci√≥n Preventivo</label>
                            <textarea class="form-textarea" placeholder="Acciones para prevenir recurrencia..." rows="3"></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Reporte a Entidades</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="acc1">
                                <label for="acc1">Reportado a la ARL</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="acc2">
                                <label for="acc2">FURAT diligenciado</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="acc3">
                                <label for="acc3">Investigaci√≥n realizada</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Evidencias</h3>
                        <div class="file-upload" onclick="document.getElementById('fileAccidentes').click()">
                            <p>üìé Click para adjuntar archivos</p>
                            <small>Fotos, FURAT, reportes m√©dicos, testimonios</small>
                            <input type="file" id="fileAccidentes" multiple>
                        </div>
                        <div class="uploaded-files" id="filesAccidentes"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Guardar Borrador</button>
                        <button type="submit" class="btn btn-danger">‚ö†Ô∏è Registrar Accidente/Incidente</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- FORM 6: SIMULACROS -->
        <div id="form-simulacros" class="tab-content">
            <div class="form-container">
                <h2 class="form-title">Registro de Simulacros de Emergencia</h2>
                
                <div class="alert alert-info">
                    <strong>üìã Frecuencia:</strong> Semestral (2 simulacros al a√±o m√≠nimo)
                </div>

                <form id="formSimulacros">
                    <div class="form-section">
                        <h3 class="section-title">Informaci√≥n del Simulacro</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Tipo de Simulacro <span class="required">*</span></label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar...</option>
                                    <option>Evacuaci√≥n</option>
                                    <option>Incendio</option>
                                    <option>Sismo</option>
                                    <option>Simulacro Distrital</option>
                                    <option>Otro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha del Simulacro <span class="required">*</span></label>
                                <input type="date" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Hora de Inicio</label>
                                <input type="time" class="form-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">N√∫mero de Participantes <span class="required">*</span></label>
                                <input type="number" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tiempo de Evacuaci√≥n</label>
                                <input type="text" class="form-input" placeholder="Ej: 3 minutos 45 segundos">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Desarrollo del Simulacro</h3>
                        <div class="form-group">
                            <label class="form-label">Descripci√≥n del Escenario <span class="required">*</span></label>
                            <textarea class="form-textarea" placeholder="Describa el escenario planteado..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Desarrollo y Comportamiento</label>
                            <textarea class="form-textarea" placeholder="C√≥mo respondieron los participantes..." rows="4"></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Evaluaci√≥n</h3>
                        <div class="form-group">
                            <label class="form-label">Aspectos Positivos</label>
                            <textarea class="form-textarea" placeholder="Qu√© funcion√≥ bien..."></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Oportunidades de Mejora</label>
                            <textarea class="form-textarea" placeholder="Qu√© se debe mejorar..."></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Plan de Mejoramiento</label>
                            <textarea class="form-textarea" placeholder="Acciones correctivas a implementar..."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Brigada de Emergencias</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="sim1">
                                <label for="sim1">Brigada conformada y presente</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="sim2">
                                <label for="sim2">Roles claramente definidos</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="sim3">
                                <label for="sim3">Equipos de emergencia utilizados</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="sim4">
                                <label for="sim4">Punto de encuentro identificado</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Evidencias</h3>
                        <div class="file-upload" onclick="document.getElementById('fileSimulacros').click()">
                            <p>üì∑ Click para adjuntar archivos</p>
                            <small>Fotos, videos, actas, listas de asistencia</small>
                            <input type="file" id="fileSimulacros" multiple>
                        </div>
                        <div class="uploaded-files" id="filesSimulacros"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Guardar Borrador</button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar Simulacro</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Tab Navigation
        function showForm(formId) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update content
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('form-' + formId).classList.add('active');

            // Update header
            const titles = {
                'induccion': 'üéì Inducci√≥n y Reinducci√≥n SST',
                'inspecciones': 'üîç Inspecciones de Seguridad',
                'mantenimiento': 'üîß Registro de Mantenimientos',
                'contratistas': 'üèóÔ∏è Seguimiento a Contratistas',
                'accidentes': '‚ö†Ô∏è Investigaci√≥n de Accidentes',
                'simulacros': 'üö® Simulacros de Emergencia'
            };
            document.getElementById('pageTitle').textContent = titles[formId];
        }

        // Inspection Type Handler
        function updateInspectionType(type) {
            const locativa = document.getElementById('inspeccion-locativa');
            const equipos = document.getElementById('inspeccion-equipos');
            
            if (type === 'trimestral') {
                locativa.style.display = 'none';
                equipos.style.display = 'block';
            } else {
                locativa.style.display = 'block';
                equipos.style.display = 'none';
            }
        }

        // File Upload Handlers
        function setupFileUpload(inputId, containerId) {
            const input = document.getElementById(inputId);
            const container = document.getElementById(containerId);
            
            input.addEventListener('change', function(e) {
                const files = Array.from(e.target.files);
                files.forEach(file => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                        <span>üìÑ ${file.name} (${(file.size / 1024).toFixed(2)} KB)</span>
                        <span class="file-remove" onclick="this.parentElement.remove()">‚úï Eliminar</span>
                    `;
                    container.appendChild(fileItem);
                });
            });
        }

        // Initialize file uploads
        setupFileUpload('fileInduccion', 'filesInduccion');
        setupFileUpload('fileInspeccion', 'filesInspeccion');
        setupFileUpload('fileMantenimiento', 'filesMantenimiento');
        setupFileUpload('fileContratistas', 'filesContratistas');
        setupFileUpload('fileAccidentes', 'filesAccidentes');
        setupFileUpload('fileSimulacros', 'filesSimulacros');

        // Form Submit Handlers
        // ============================================
        // FORMULARIO 1: REGISTRO INDUCCI√ìN
        // ============================================
        document.getElementById('formInduccion').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const datos = {
                fecha: formData.get('fecha') || '',
                tema: formData.get('tema') || '',
                instructor: formData.get('instructor') || '',
                duracion: formData.get('duracion') || '',
                asistentes: formData.get('asistentes') || '',
                observaciones: formData.get('observaciones') || '',
                timestamp: new Date().toISOString()
            };
            
            const registroId = 'induccion-' + Date.now();
            database.ref(`edificios/${EDIFICIO_ID}/inducciones/${registroId}`).set(datos)
                .then(() => {
                    console.log('‚úÖ Inducci√≥n guardada:', registroId);
                    alert('‚úÖ Registro de Inducci√≥n guardado exitosamente en Firebase!');
                    e.target.reset();
                })
                .catch((error) => {
                    console.error('‚ùå Error:', error);
                    alert('‚ùå Error guardando. Intenta de nuevo.');
                });
        });

        // ============================================
        // FORMULARIO 2: INSPECCIONES LOCATIVAS
        // ============================================
        document.getElementById('formInspecciones').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const datos = {
                fecha: formData.get('fecha') || '',
                inspector: formData.get('inspector') || '',
                area: formData.get('area') || '',
                hallazgos: formData.get('hallazgos') || '',
                estado: formData.get('estado') || '',
                observaciones: formData.get('observaciones') || '',
                timestamp: new Date().toISOString()
            };
            
            const registroId = 'inspeccion-' + Date.now();
            database.ref(`edificios/${EDIFICIO_ID}/inspecciones/${registroId}`).set(datos)
                .then(() => {
                    console.log('‚úÖ Inspecci√≥n guardada:', registroId);
                    alert('‚úÖ Inspecci√≥n registrada exitosamente en Firebase!');
                    e.target.reset();
                })
                .catch((error) => {
                    console.error('‚ùå Error:', error);
                    alert('‚ùå Error guardando. Intenta de nuevo.');
                });
        });

        // ============================================
        // FORMULARIO 3: REGISTRO MANTENIMIENTOS
        // ============================================
        document.getElementById('formMantenimiento').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const datos = {
                fecha: formData.get('fecha') || '',
                actividad: formData.get('actividad') || '',
                responsable: formData.get('responsable') || '',
                estado: formData.get('estado') || '',
                costo: formData.get('costo') || '',
                observaciones: formData.get('observaciones') || '',
                timestamp: new Date().toISOString()
            };
            
            const registroId = 'mantenimiento-' + Date.now();
            database.ref(`edificios/${EDIFICIO_ID}/mantenimientos/${registroId}`).set(datos)
                .then(() => {
                    console.log('‚úÖ Mantenimiento guardado:', registroId);
                    alert('‚úÖ Mantenimiento registrado exitosamente en Firebase!');
                    e.target.reset();
                })
                .catch((error) => {
                    console.error('‚ùå Error:', error);
                    alert('‚ùå Error guardando. Intenta de nuevo.');
                });
        });

        // ============================================
        // FORMULARIO 4: SOPORTES CONTRATISTAS
        // ============================================
        document.getElementById('formContratistas').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const datos = {
                fecha: formData.get('fecha') || '',
                contratista: formData.get('contratista') || '',
                servicio: formData.get('servicio') || '',
                documentos: formData.get('documentos') || '',
                cumplimiento: formData.get('cumplimiento') || '',
                observaciones: formData.get('observaciones') || '',
                timestamp: new Date().toISOString()
            };
            
            const registroId = 'contratista-' + Date.now();
            database.ref(`edificios/${EDIFICIO_ID}/contratistas/${registroId}`).set(datos)
                .then(() => {
                    console.log('‚úÖ Contratista guardado:', registroId);
                    alert('‚úÖ Verificaci√≥n de contratista guardada en Firebase!');
                    e.target.reset();
                })
                .catch((error) => {
                    console.error('‚ùå Error:', error);
                    alert('‚ùå Error guardando. Intenta de nuevo.');
                });
        });

        document.getElementById('formAccidentes').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('‚ö†Ô∏è Accidente/Incidente registrado!\n\n(Se guardar√° en la base de datos y se notificar√°)');
        });

        document.getElementById('formSimulacros').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('‚úÖ Simulacro registrado exitosamente!\n\n(Se guardar√° en la base de datos)');
        });

        // Auto-calculate total attendees
        const serdan = document.querySelectorAll('input[placeholder="N√∫mero de asistentes"]')[0];
        const sosa = document.querySelectorAll('input[placeholder="N√∫mero de asistentes"]')[1];
        const total = document.querySelector('input[placeholder="Total"]');

        if (serdan && sosa && total) {
            [serdan, sosa].forEach(input => {
                input.addEventListener('input', () => {
                    const s = parseInt(serdan.value) || 0;
                    const o = parseInt(sosa.value) || 0;
                    total.value = s + o;
                });
            });
        }

        // ============================================
        // FIREBASE CONFIGURATION - Nepal 2
        // ============================================
        const firebaseConfig = {
          apiKey: "AIzaSyCb2pko11_UOP6V5VPQV_xARWrC5wybQ6w",
          authDomain: "compliancepro--o--sistemass.firebaseapp.com",
          databaseURL: "https://compliancepro--o--sistemass-default-rtdb.firebaseio.com",
          projectId: "compliancepro--o--sistemass",
          storageBucket: "compliancepro--o--sistemass.firebasestorage.app",
          messagingSenderId: "188559834704",
          appId: "1:188559834704:web:73f1b088e9dcda16ab9b55"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Edificio ID
        const EDIFICIO_ID = 'nepal-2';

        console.log('‚úÖ Firebase inicializado - Formularios Registros Nepal 2');
        console.log('üìä Edificio:', EDIFICIO_ID);
    </script>
</body>
</html>
